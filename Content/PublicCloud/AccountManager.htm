<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../Resources/TableStyles/PatternedRows.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body>
        <h1>
            <MadCap:concept term="PublicCloud;Settings" /><MadCap:variable name="local.Account Manager" />
        </h1>
        <MadCap:snippetBlock src="../Resources/TopicTemplates/Collateral/UL_Contents.flsnp" />
        <MadCap:snippetBlock src="../Resources/TopicTemplates/Collateral/H2_Overview.flsnp" />
        <p>The Monitored Accounts Screen displays the cloud service provider accounts  <MadCap:variable name="local-iris.ProductName" /> is currently monitoring, and their credentials. The information is separated into two different tabs, <span class="ScreenObject">Accounts</span> and <span class="ScreenObject">Credentials</span>.</p>
        <p>
            <img src="../PublicCloud-Images/Screen_Account_Manager.png" class="ThumbnailPopup" />
        </p>
        <p>Each line under <span class="ScreenObject">Accounts</span> represents one cloud vendor account and displays account information with an indication of the synchronization status for that account. </p>
        <p>Each line under <span class="ScreenObject">Credentials</span> represents one set of 'cross account' credentials that can be used by one or more accounts as an alternative to defining credentials at the account level.</p>
        <p>You must make sure you have defined sufficient permissions in your cloud accounts so that <MadCap:variable name="local-iris.ProductName" /> can monitor them. These requirements could change with the addition of new features in the future.</p>
        <p class="h4">What permissions are needed in my AWS Accounts?</p>
        <ol>
            <li>
                <p>A ReadOnlyAccess policy</p>
            </li>
            <li>
                <p>A SecurityAudit policy</p>
            </li>
            <li>
                <p>A custom policy as defined below:</p><pre xml:space="preserve">
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "Statement1",
            "Effect": "Allow",
            "Action": [
                "ec2:Describe*",
                "elasticloadbalancing:Describe*",
                "iam:List*",
                "iam:Get*",
                "iam:Generate*",
                "s3:Get*",
                "s3:List*",
                "cloudtrail:Describe*"
            ],
            "Resource": "*"
        }
    ]
}</pre>
            </li>
            <li>
                <p>A custom policy as defined below:</p><pre xml:space="preserve">
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "Statement1",
            "Effect": "Allow",
            "Action": [
                "ec2:DescribeInstances",
                "ec2:DescribeRegions",
                "ec2:DescribeSecurityGroups",
                "ec2:DescribeVpcs",
                "ec2:DescribeVpcPeeringConnections",
                "ec2:DescribeSubnets",
                "ec2:DescribeRouteTables",
                "elasticloadbalancing:DescribeLoadBalancers",
                "elasticloadbalancing:DescribeListeners",
                "elasticloadbalancing:DescribeTargetHealth",
                "elasticloadbalancing:DescribeTargetGroups",
                "iam:ListInstanceProfiles",
                "iam:GetAccountAuthorizationDetails",
                "iam:GetAccountPasswordPolicy",
                "iam:GenerateCredentialReport",
                "iam:GetCredentialReport",
                "iam:GetAccountSummary",
                "iam:ListVirtualMFADevices",
                "s3:GetBucketTagging",
                "s3:GetBucketWebsite",
                "s3:GetBucketLogging",
                "s3:GetBucketVersioning",
                "s3:GetBucketAcl",
                "s3:GetBucketPolicy",
                "s3:GetEncryptionConfiguration",
                "s3:ListAllMyBuckets",
                "s3:GetBucketLocation",
                "cloudtrail:DescribeTrails"
            ],
            "Resource": "*"
        }
    ]
}</pre>
            </li>
        </ol>
        <p class="h4">What permissions are needed  in my Azure Accounts?</p>
        <ol>
            <li>
                <p>In Azure Active Directory create a new application registration where:</p>
                <p>Name=&lt;Your name&gt;</p>
                <p><span class="ScreenObject">Application Type</span> = <span class="StatusOrValue">Web app / API</span></p>
                <p><span class="ScreenObject">Sign-on URL</span> = <span class="StatusOrValue">https://iris.tufin.io</span></p>
            </li>
            <li>
                <p>For the required subscription, under Access control (IAM), add a role assignment to the application registration created in the previous step where:</p>
                <p><span class="ScreenObject">Role</span>=<span class="StatusOrValue">Reader</span></p>
                <p><span class="ScreenObject">Assign access to</span>=<span class="StatusOrValue">Azure AD user, group or service principal</span></p>
            </li>
            <li>Add Directory.read.all permission to the Azure <MadCap:variable name="local.ActiveDirectory" /> Graph API</li>
            <li>Grant admin consent for Default Directory to the Azure <MadCap:variable name="local.ActiveDirectory" /> Graph API<br /></li>
        </ol>
        <p>For additional information see <a href="https://docs.microsoft.com/he-il/azure/role-based-access-control/overview">What is role-based access control (RBAC) in Azure</a>.</p>
        <MadCap:snippetBlock src="../Resources/TopicTemplates/Collateral/H2_Actions.flsnp" />
        <ul class="Action">
            <li><a href="#AddAnAccount">Add an account</a>
            </li>
            <li><a href="#RemoveAnAccount">Remove an account</a>
            </li>
            <li><a href="#EditAnAccount">Edit an account</a>
            </li>
            <li><a href="#Sync_an_Account">Sync an account</a>
            </li>
            <li><a href="#Add_a_Credential">Add a cross-account credential</a>
            </li>
            <li><a href="#Remove_a_Credential">Remove a cross-account credential</a>
            </li>
            <li><a href="#Edit_a_Credential">Edit a cross-account credential</a>
            </li>
        </ul>
        <p class="h3"><a name="AddAnAccount"></a>Add an Account</p>
        <p>The required account must already exist on the cloud environment. </p>
        <ol>
            <li>
                <p>Make sure the <span class="ScreenObject">Accounts Tab</span> is selected</p>
            </li>
            <li>
                <p>Click <img src="../PublicCloud-Images/icon_Plus.png" class="noborder" /> to display the Choose Vendor Window </p>
            </li>
            <li>
                <p>Select the vendor for which the account is to be added. The Add Account Window is displayed according to the vendor selected.</p>
                <p>
                    <img src="../PublicCloud-Images/Window_Add_AWS-Credentials.png" class="ThumbnailPopup" /> <img src="../PublicCloud-Images/Window_Add_Azure_Account.png" class="ThumbnailPopup" /></p>
            </li>
            <li>
                <p>Enter Account Display Name. This is for your convenience only and can be any value you choose.</p>
            </li>
            <li>
                <p>Complete the information according to the account type - <MadCap:variable name="local.AWS" /> or <MadCap:variable name="local.Azure" /> and the type of credentials you want to provide: Options as follows:</p>
                <ul>
                    <li><a href="#Add_AWS_Account_With_Secret">AWS account using access key with secret</a>
                    </li>
                    <li><a href="#Add_AWS_Account_Using_Saved_Secret">AWS account using account ID and saved secret</a>
                    </li>
                    <li><a href="#Add_AWS_Using_Tufin">AWS account using a Tufin account</a>
                    </li>
                    <li><a href="#Add_Azure_Account_With_Secret">Azure account with secret</a>
                    </li>
                    <li><a href="#Add_Azure_Account_Using_Saved_Secret">Azure account using saved secret</a>
                    </li>
                </ul>
            </li>
            <li>
                <p>Click <span class="ScreenObject">Add </span>to save. </p>
            </li>
        </ol>
        <p class="h4"><a name="Add_AWS_Account_With_Secret"></a>AWS Account Using Access Key ID With Secret</p>
        <p>This option requires the access key information for the account to be added.</p>
        <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <thead>
                <tr class="TableStyle-PatternedRows-Head-Header1">
                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Field</th>
                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Value</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows-Body-LightRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">Access key ID</td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                        <p>From your AWS account details</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-DarkRows">
                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkRows">Secret Access Key</td>
                    <td class="TableStyle-PatternedRows-BodyA-Regular-DarkRows">From your AWS account details</td>
                </tr>
            </tbody>
        </table>
        <p class="h4"><a name="Add_AWS_Account_Using_Saved_Secret"></a>AWS Account Using Account ID and Saved Secret</p>
        <p>This option can only be used if you have previously added cross-account credentials appropriate to the account to be added.</p>
        <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <thead>
                <tr class="TableStyle-PatternedRows-Head-Header1">
                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Field</th>
                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Value</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows-Body-LightRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">Account ID</td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                        <p>From your AWS account details</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-DarkRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkRows">ARN Role</td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkRows">From your AWS account details</td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-LightRows">
                    <td class="TableStyle-PatternedRows-BodyB-Regular-LightRows">
                        <p>Credential Name</p>
                    </td>
                    <td class="TableStyle-PatternedRows-BodyA-Regular-LightRows">
                        <p>As defined in <MadCap:variable name="local-iris.ProductName" /> under credentials</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="h4"><a name="Add_AWS_Using_Tufin"></a>AWS Account Using a Tufin Account</p>
        <p>This option can be used if  you have a policy that allows calling AssumeRole on the Amazon Resource Name (ARN) of the role in another account</p>
        <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <thead>
                <tr class="TableStyle-PatternedRows-Head-Header1">
                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Field</th>
                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Value</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows-Body-LightRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">ARN Role</td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">The Amazon Resource Name (ARN) of a role to assume.

Example: arn:aws:iam::006755140343:role/AssumRoleAdmin</td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-DarkRows">
                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkRows">
                        <p>External ID</p>
                    </td>
                    <td class="TableStyle-PatternedRows-BodyA-Regular-DarkRows">
                        <p>Optional. A unique identifier that is used by third parties when assuming roles in their customers' accounts. For each role that the third party can assume, they should instruct their customers to ensure the role's trust policy checks for the external ID that the third party generated. Each time the third party assumes the role, they should pass the customer's external ID.</p>
                        <p><a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html">http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html</a>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="h4">Azure Account With Secret</p>
        <p>This option requires the access information for the account to be added.</p>
        <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <thead>
                <tr class="TableStyle-PatternedRows-Head-Header1">
                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Field</th>
                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Value</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows-Body-LightRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                        <p>Subscription ID</p>
                    </td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                        <p>From your Azure account details</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-DarkRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkRows">Tenant</td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkRows">From your Azure account details</td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-LightRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                        <p>Application ID</p>
                    </td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                        <p>From your Azure account details</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-DarkRows">
                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkRows">Application Secret</td>
                    <td class="TableStyle-PatternedRows-BodyA-Regular-DarkRows">From your Azure account details</td>
                </tr>
            </tbody>
        </table>
        <p class="h4"><a name="Add_Azure_Account_Using_Saved_Secret"></a>Azure Account Using Saved Secret</p>
        <p>This option can only be used if you have already added cross-account credentials appropriate to the account to be added.</p>
        <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <col class="TableStyle-PatternedRows-Column-Regular" />
            <thead>
                <tr class="TableStyle-PatternedRows-Head-Header1">
                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Field</th>
                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Value</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows-Body-LightRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                        <p>Subscription ID</p>
                    </td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                        <p>From your Azure account details</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-DarkRows">
                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkRows">Tenant</td>
                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkRows">From your Azure account details</td>
                </tr>
                <tr class="TableStyle-PatternedRows-Body-LightRows">
                    <td class="TableStyle-PatternedRows-BodyB-Regular-LightRows">
                        <p>Credential Name</p>
                    </td>
                    <td class="TableStyle-PatternedRows-BodyA-Regular-LightRows">
                        <p>As defined in <MadCap:variable name="local-iris.ProductName" /> under credentials</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="h3"><a name="RemoveAnAccount"></a>Remove an Account</p>
        <ol>
            <li>Click on the Ellipsis button <img src="../PublicCloud-Images/Button_Ellipsis.png" class="noborder" style="width: 10px;height: 13px;"></img> for the tag you want to remove. </li>
            <li>Click <span class="ScreenObject">Remove Account</span> from the pop-up menu.</li>
            <li>The Tag will be removed from the display.</li>
        </ol>
        <p class="h3"><a name="EditAnAccount"></a>Edit an Account</p>
        <ol>
            <li>Click on the Ellipsis button <img src="../PublicCloud-Images/Button_Ellipsis.png" class="noborder"></img> for the tag you want to remove. </li>
            <li>Click <span class="ScreenObject">Edit Account</span> from the pop-up menu.</li>
            <li>The Edit Account Window will be  displayed. See <a href="#AddAnAccount">Add an Account</a> for more information.</li>
            <li>Make changes as necessary and click <span class="ScreenObject">Save</span>.</li>
        </ol>
        <p class="h3"><a name="Sync_an_Account"></a>Sync an Account</p>
        <p>The sync function brings up-to-date cloud environment information for a specific account into <MadCap:variable name="local-iris.ProductName" />.</p>
        <ol>
            <li>Click on the Ellipsis button <img src="../PublicCloud-Images/Button_Ellipsis.png" class="noborder"></img> for the tag you want to remove. </li>
            <li>Click <span class="ScreenObject">Sync account</span> from the pop-up menu.</li>
            <li>The status tag icon on the account line will change to a syncing icon and once completed, the OK icon will be  displayed. See <a href="#AddAnAccount">Add an Account</a> for more information.</li>
        </ol>
        <p class="h3"><a name="Add_a_Credential"></a>Add a Cross-Account Credential</p>
        <ol>
            <li>Make sure the <span class="ScreenObject">Credentials Tab</span> is selected</li>
            <li>Click <img src="../PublicCloud-Images/icon_Plus.png" class="noborder" /> to display the Choose Vendor Window </li>
            <li>
                <p>Click on the vendor for which the account is to be added. The Add Credential Window is displayed.</p>
            </li>
            <li>Enter Credentials Display Name. This is for convenience only and can be any value you choose.</li>
            <li>
                <p>Enter the remaining fields according to your vendor.</p>
                <p class="h4">AWS</p>
                <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
                    <col class="TableStyle-PatternedRows-Column-Regular" style="width: 371px;" />
                    <col class="TableStyle-PatternedRows-Column-Regular" />
                    <thead>
                        <tr class="TableStyle-PatternedRows-Head-Header1">
                            <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Field</th>
                            <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">Access key ID</td>
                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                <p>From your AWS account details</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-PatternedRows-Body-DarkRows">
                            <td class="TableStyle-PatternedRows-BodyB-Regular-DarkRows">Secret Access Key</td>
                            <td class="TableStyle-PatternedRows-BodyA-Regular-DarkRows">From your AWS account details</td>
                        </tr>
                    </tbody>
                </table>
                <p class="h4">Azure</p>
                <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
                    <col class="TableStyle-PatternedRows-Column-Regular" />
                    <col class="TableStyle-PatternedRows-Column-Regular" />
                    <thead>
                        <tr class="TableStyle-PatternedRows-Head-Header1">
                            <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Field</th>
                            <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                <p>Application ID</p>
                            </td>
                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                <p>From your Azure account details</p>
                            </td>
                        </tr>
                        <tr class="TableStyle-PatternedRows-Body-DarkRows">
                            <td class="TableStyle-PatternedRows-BodyB-Regular-DarkRows">Application Secret</td>
                            <td class="TableStyle-PatternedRows-BodyA-Regular-DarkRows">From your Azure account details</td>
                        </tr>
                    </tbody>
                </table>
            </li>
            <li>Click <span class="ScreenObject">Add</span> to save.</li>
        </ol>
        <p class="h3"><a name="Remove_a_Credential"></a>Remove a Cross-Account Credential</p>
        <ol>
            <li>Click on the Ellipsis button <img src="../PublicCloud-Images/Button_Ellipsis.png" class="noborder" /> for the credential you want to remove. </li>
            <li>Click <span class="ScreenObject">Remove Rule</span> from the pop-up menu.</li>
            <li>The credential will be removed from the display.</li>
        </ol>
        <p class="h3"><a name="Edit_a_Credential"></a>Edit a Cross-Account Credential</p>
        <ol>
            <li>Click on the Ellipsis button <img src="../PublicCloud-Images/Button_Ellipsis.png" class="noborder" /> for the credential you want to change. </li>
            <li>Click <span class="ScreenObject">Edit Rule</span> from the pop-up menu.</li>
            <li>The Edit Credential Window will be  displayed. See <a href="#Add_a_Credential">Add a Credential</a> for more information.</li>
            <li>Make changes as necessary and click <span class="ScreenObject">Save</span>.</li>
        </ol>
        <MadCap:snippetBlock src="../Resources/TopicTemplates/Collateral/H2_GetHere.flsnp" />
        <MadCap:snippetBlock src="../Resources/Snippets/GetHere_AccountManager.flsnp" />
    </body>
</html>